<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ESP32 Servo Motion Studio</title>
  <link rel="icon" href="./favicon.ico" sizes="any" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="page">
    <header class="hero">
      <div class="hero-brand">
        <span class="eyebrow" data-i18n="app.eyebrow">ESP32 Servo Motion Kit</span>
        <div class="hero-title-row">
          <h1 data-i18n="app.title">Motion Studio</h1>
          <p class="lead" data-i18n="app.subtitle">
            Configure servo, joint, pose, motion, and sequence settings, then export a header for your ESP32 sketch.
            Preview via WebSerial is optional.
          </p>
        </div>
      </div>
      <div class="hero-panel">
        <div class="hero-tabs" data-hero-tabs>
          <div class="hero-tabbar">
            <div class="hero-tablist" role="tablist" aria-label="Hero">
              <button class="hero-tab is-active" role="tab" data-hero-tab="device" aria-selected="true"
                aria-controls="hero-device" data-i18n="device.title">
                Device Link
              </button>
              <button class="hero-tab" role="tab" data-hero-tab="preview" aria-selected="false"
                aria-controls="hero-preview" data-i18n="preview.title">
                Preview
              </button>
            </div>
            <div class="language-block">
              <label for="language-select" data-i18n="language.label">Language</label>
              <select id="language-select" data-i18n-aria="language.aria">
                <option value="en" data-i18n="language.option.en">English</option>
                <option value="ja" data-i18n="language.option.ja">日本語</option>
              </select>
              <p class="hint" data-i18n="language.hint">Auto-detected from the browser.</p>
            </div>
          </div>
          <div class="hero-tab-body">
            <section class="card insight-card hero-summary">
              <h3 data-i18n="insight.title">Workspace Snapshot</h3>
              <div class="insight-grid">
                <div>
                  <span class="insight-k" data-i18n="insight.servos">Servos</span>
                  <span class="insight-v">12</span>
                </div>
                <div>
                  <span class="insight-k" data-i18n="insight.joints">Joints</span>
                  <span class="insight-v">6</span>
                </div>
                <div>
                  <span class="insight-k" data-i18n="insight.poses">Poses</span>
                  <span class="insight-v">8</span>
                </div>
                <div>
                  <span class="insight-k" data-i18n="insight.sequences">Sequences</span>
                  <span class="insight-v">3</span>
                </div>
              </div>
              <div class="card-actions">
                <button class="btn btn-outline" type="button" data-i18n="common.import">Import project</button>
                <button class="btn btn-secondary" type="button" data-i18n="common.save">Save project</button>
              </div>
            </section>
            <div class="hero-tab-panels">
              <section class="card hero-tab-panel is-active" id="hero-device" data-hero-panel="device" aria-hidden="false">
                <header class="panel-header">
                  <div>
                    <h2 data-i18n="device.title">Device Link</h2>
                  </div>
                  <div class="status-pill" id="status-pill">
                    <span class="status-dot"></span>
                    <span id="status-label" data-i18n="device.status.disconnected">Disconnected</span>
                  </div>
                </header>
                <div class="status-actions">
                  <button class="btn btn-primary" id="connect-button" type="button" data-i18n="device.actions.connect">
                    Connect
                  </button>
                  <button class="btn btn-ghost" id="disconnect-button" type="button" data-i18n="device.actions.disconnect">
                    Disconnect
                  </button>
                  <button class="btn btn-outline" id="flash-button" type="button" data-i18n="device.actions.flash">
                    Flash preview firmware
                  </button>
                </div>
                <div class="status-grid">
                  <div>
                    <span class="status-k" data-i18n="device.meta.port">Port</span>
                    <span class="status-v" id="port-label">—</span>
                  </div>
                  <div>
                    <span class="status-k" data-i18n="device.meta.firmware">Firmware</span>
                    <span class="status-v" id="firmware-label">—</span>
                  </div>
                  <div>
                    <span class="status-k" data-i18n="device.meta.sync">Last sync</span>
                    <span class="status-v" id="sync-label">—</span>
                  </div>
                  <div>
                    <span class="status-k" data-i18n="device.meta.mode">Mode</span>
                    <span class="status-v" id="mode-label" data-i18n="device.mode.live">Live</span>
                  </div>
                </div>
              </section>
              <section class="card hero-tab-panel" id="hero-preview" data-hero-panel="preview" aria-hidden="true" hidden>
                <header class="panel-header">
                  <div>
                  <h2 data-i18n="preview.title">Preview</h2>
                </div>
                </header>
                <div class="panel-grid panel-grid--workspace">
                <article class="panel-pane panel-pane--list">
                  <div class="servo-strip" role="list">
                    <div class="servo-card" role="listitem">
                      <div class="servo-card-header">
                        <div class="servo-card-title">servo_front_left</div>
                        <span class="chip">PWM</span>
                      </div>
                      <div class="servo-card-preview">
                        <div class="mini-dial">
                          <div class="mini-needle"></div>
                        </div>
                        <label class="servo-card-controls">
                          <span data-i18n="servo.preview.card.angle">Angle</span>
                          <div class="servo-card-inputs">
                            <input type="range" min="0" max="360" value="92" data-preview-card-angle />
                            <input type="number" min="0" max="360" value="92" data-preview-card-angle-input />
                          </div>
                        </label>
                      </div>
                    </div>
                    <div class="servo-card" role="listitem">
                      <div class="servo-card-header">
                        <div class="servo-card-title">servo_front_right</div>
                        <span class="chip">PWM</span>
                      </div>
                      <div class="servo-card-preview">
                        <div class="mini-dial">
                          <div class="mini-needle"></div>
                        </div>
                        <label class="servo-card-controls">
                          <span data-i18n="servo.preview.card.angle">Angle</span>
                          <div class="servo-card-inputs">
                            <input type="range" min="0" max="360" value="88" data-preview-card-angle />
                            <input type="number" min="0" max="360" value="88" data-preview-card-angle-input />
                          </div>
                        </label>
                      </div>
                    </div>
                    <div class="servo-card" role="listitem">
                      <div class="servo-card-header">
                        <div class="servo-card-title">servo_tail</div>
                        <span class="chip">TTL</span>
                      </div>
                      <div class="servo-card-preview">
                        <div class="mini-dial">
                          <div class="mini-needle"></div>
                        </div>
                        <label class="servo-card-controls">
                          <span data-i18n="servo.preview.card.angle">Angle</span>
                          <div class="servo-card-inputs">
                            <input type="range" min="0" max="360" value="120" data-preview-card-angle />
                            <input type="number" min="0" max="360" value="120" data-preview-card-angle-input />
                          </div>
                        </label>
                      </div>
                    </div>
                    <div class="servo-card" role="listitem">
                      <div class="servo-card-header">
                        <div class="servo-card-title">servo_aux_1</div>
                        <span class="chip">PWM</span>
                      </div>
                      <div class="servo-card-preview">
                        <div class="mini-dial">
                          <div class="mini-needle"></div>
                        </div>
                        <label class="servo-card-controls">
                          <span data-i18n="servo.preview.card.angle">Angle</span>
                          <div class="servo-card-inputs">
                            <input type="range" min="0" max="360" value="75" data-preview-card-angle />
                            <input type="number" min="0" max="360" value="75" data-preview-card-angle-input />
                          </div>
                        </label>
                      </div>
                    </div>
                  </div>
                </article>
              </div>
              </section>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="workspace">
      <aside class="tab-rail" role="tablist" aria-label="Workspace" data-i18n-aria="tabs.heading">
        <div class="rail-header">
          <h2 data-i18n="tabs.heading">Workspace</h2>
        </div>
        <button class="tab-button is-active" data-tab="servo" role="tab" aria-selected="true" aria-controls="panel-servo">
          <span class="tab-title" data-i18n="tabs.servo">Servo Settings</span>
          <span class="tab-note" data-i18n="tabs.servo.note">PWM, limits, preview</span>
        </button>
        <button class="tab-button" data-tab="joint" role="tab" aria-selected="false" aria-controls="panel-joint">
          <span class="tab-title" data-i18n="tabs.joint">Joint Settings</span>
          <span class="tab-note" data-i18n="tabs.joint.note">Axis mapping & offsets</span>
        </button>
        <button class="tab-button" data-tab="joint-group" role="tab" aria-selected="false" aria-controls="panel-joint-group">
          <span class="tab-title" data-i18n="tabs.jointGroup">Joint Group Settings</span>
          <span class="tab-note" data-i18n="tabs.jointGroup.note">Grouped editing</span>
        </button>
        <button class="tab-button" data-tab="pose" role="tab" aria-selected="false" aria-controls="panel-pose">
          <span class="tab-title" data-i18n="tabs.pose">Pose Settings</span>
          <span class="tab-note" data-i18n="tabs.pose.note">Pose library</span>
        </button>
        <button class="tab-button" data-tab="sequence" role="tab" aria-selected="false" aria-controls="panel-sequence">
          <span class="tab-title" data-i18n="tabs.sequence">Sequence Settings</span>
          <span class="tab-note" data-i18n="tabs.sequence.note">Steps & triggers</span>
        </button>
        <button class="tab-button" data-tab="easing" role="tab" aria-selected="false" aria-controls="panel-easing">
          <span class="tab-title" data-i18n="tabs.easing">Easing Settings</span>
          <span class="tab-note" data-i18n="tabs.easing.note">Curves & presets</span>
        </button>
        <button class="tab-button" data-tab="event" role="tab" aria-selected="false" aria-controls="panel-event">
          <span class="tab-title" data-i18n="tabs.event">Event Settings</span>
          <span class="tab-note" data-i18n="tabs.event.note">Triggers & cues</span>
        </button>
      </aside>

      <section class="tab-panels">
        <section class="tab-panel is-active" id="panel-servo" data-panel="servo" role="tabpanel" aria-label="Servo">
          <header class="panel-header">
            <h2 data-i18n="servo.title">Servo Settings</h2>
            <p class="panel-note" data-i18n="servo.desc">Define PWM range, neutral, and safety limits per servo.</p>
          </header>
          <div class="panel-grid panel-grid--workspace">
            <article class="card panel-pane panel-pane--list" style="--delay: 60ms;">
              <div class="list-header">
                <h3 data-i18n="servo.card.list">Servo List</h3>
                <div class="list-actions">
                  <button class="btn btn-outline" type="button" data-i18n="common.add">Add</button>
                </div>
              </div>
              <label class="form-field list-filter">
                <span data-i18n="common.filter.label">Filter by ID</span>
                <input type="text" data-i18n-placeholder="common.filter.placeholder" placeholder="Filter by ID" />
              </label>
              <ul class="list">
                <li class="list-item is-active">
                  <span>servo_front_left</span>
                  <span class="chip">PWM</span>
                </li>
                <li class="list-item">
                  <span>servo_front_right</span>
                  <span class="chip">PWM</span>
                </li>
                <li class="list-item">
                  <span>servo_tail</span>
                  <span class="chip">TTL</span>
                </li>
              </ul>
            </article>
            <article class="card panel-pane panel-pane--editor" style="--delay: 120ms;">
              <h3 data-i18n="servo.card.profile">Servo Profile</h3>
              <div class="form-grid">
                <label class="form-field">
                  <span data-i18n="servo.form.id">Servo ID</span>
                  <input type="text" data-i18n-placeholder="servo.form.id.placeholder" placeholder="servo_front_left" />
                </label>
                <label class="form-field">
                  <span data-i18n="servo.form.type">Type</span>
                  <select data-servo-type-select>
                    <option value="pwm" data-i18n="servo.form.type.pwm">PWM</option>
                    <option value="ttl" data-i18n="servo.form.type.ttl">TTL/Bus</option>
                  </select>
                </label>
                <label class="form-field">
                  <span data-i18n="servo.form.mode">Mode</span>
                  <select>
                    <option value="position" data-i18n="servo.form.mode.position">Position (180°)</option>
                    <option value="wheel" data-i18n="servo.form.mode.wheel">Wheel (360°)</option>
                  </select>
                </label>
                <label class="form-field">
                  <span data-i18n="servo.form.previewOffset">Preview offset (deg)</span>
                  <input type="number" value="0" data-preview-offset-input />
                </label>
                <label class="form-field">
                  <span data-i18n="servo.form.previewDirection">Preview direction</span>
                  <select data-preview-direction-select>
                    <option value="cw" data-i18n="servo.form.previewDirection.cw">Clockwise</option>
                    <option value="ccw" data-i18n="servo.form.previewDirection.ccw">Counterclockwise</option>
                  </select>
                </label>
                <label class="form-field">
                  <span data-i18n="servo.form.displayOrder">Display order</span>
                  <input type="number" value="10" min="0" data-i18n-placeholder="servo.form.displayOrder.placeholder" placeholder="10" />
                </label>
                <label class="form-field form-field--full">
                  <span data-i18n="servo.form.description">Description</span>
                  <textarea rows="2" data-i18n-placeholder="servo.form.description.placeholder"
                    placeholder="Left shoulder servo for v1 prototype"></textarea>
                </label>
              </div>
              <div class="servo-type-group is-active" data-servo-type-group="pwm" aria-hidden="false">
                <div class="form-grid">
                  <label class="form-field">
                    <span data-i18n="servo.form.pin">PWM Pin</span>
                    <input type="number" value="18" min="0" />
                  </label>
                  <label class="form-field">
                    <span data-i18n="servo.form.pwm.freq">PWM Frequency (Hz)</span>
                    <input type="number" value="50" min="1" />
                  </label>
                  <label class="form-field">
                    <span data-i18n="servo.form.pwm.pulseMin">Pulse min (us)</span>
                    <input type="number" value="500" min="0" />
                  </label>
                  <label class="form-field">
                    <span data-i18n="servo.form.pwm.pulseMax">Pulse max (us)</span>
                    <input type="number" value="2400" min="0" />
                  </label>
                  <label class="form-field">
                    <span data-i18n="servo.form.pwm.center">Pulse center (us)</span>
                    <input type="number" value="1500" min="0" />
                  </label>
                  <label class="form-field">
                    <span data-i18n="servo.form.pwm.deadband">Deadband (us)</span>
                    <input type="number" value="5" min="0" />
                  </label>
                  <label class="form-field">
                    <span data-i18n="servo.form.pwm.speed">Speed limit (deg/s)</span>
                    <input type="number" value="300" min="0" />
                  </label>
                  <label class="form-field">
                    <span data-i18n="servo.form.pwm.angleMin">Angle min (deg)</span>
                    <input type="number" value="0" min="-180" max="180" />
                  </label>
                  <label class="form-field">
                    <span data-i18n="servo.form.pwm.angleMax">Angle max (deg)</span>
                    <input type="number" value="180" min="-180" max="180" />
                  </label>
                  <label class="form-field">
                    <span data-i18n="servo.form.pwm.offset">Offset (deg)</span>
                    <input type="number" value="0" />
                  </label>
                </div>
              </div>
              <div class="servo-type-group" data-servo-type-group="ttl" aria-hidden="true" hidden>
                <p class="muted" data-i18n="servo.form.ttl.note">
                  TTL/Bus fields are defined later. Preview UI shows placeholders.
                </p>
                <div class="form-grid">
                  <label class="form-field">
                    <span data-i18n="servo.form.ttl.address">Bus address</span>
                    <input type="number" value="1" min="0" disabled />
                  </label>
                  <label class="form-field">
                    <span data-i18n="servo.form.ttl.bus">UART bus</span>
                    <input type="text" value="UART0" disabled />
                  </label>
                </div>
              </div>
              <div class="card-actions">
                <button class="btn btn-secondary" type="button" data-i18n="common.save">Save</button>
                <button class="btn btn-ghost" type="button" data-i18n="common.deleteSelected">Delete selected</button>
              </div>
            </article>
            <article class="card card--accent panel-pane panel-pane--aux" style="--delay: 180ms;">
              <h3 data-i18n="servo.card.preview">Live Preview</h3>
              <div class="preview-dial">
                <div class="dial-face"></div>
                <div class="dial-needle"></div>
              </div>
              <label class="form-field">
                <div class="form-field-row">
                  <span data-i18n="servo.preview.angle">Preview angle</span>
                </div>
                <div class="form-field-row">
                  <input type="range" min="0" max="360" value="90" id="servo-preview-angle" />
                  <input type="number" min="0" max="360" value="90" id="servo-preview-angle-input" />
                </div>
              </label>
              <p class="muted preview-note" data-i18n="servo.preview.offset.note">
                Example: Set preview offset to 270° (or -90°) to start from the left. Use clockwise or
                counterclockwise to flip the rotation direction.
              </p>
            </article>
          </div>
        </section>

        <section class="tab-panel" id="panel-joint" data-panel="joint" role="tabpanel" aria-label="Joint">
          <header class="panel-header">
            <h2 data-i18n="joint.title">Joint Settings</h2>
            <p class="panel-note" data-i18n="joint.desc">Bind logical axes to one or more servos.</p>
          </header>
          <div class="panel-grid panel-grid--workspace">
            <article class="card panel-pane panel-pane--list" style="--delay: 60ms;">
              <div class="list-header">
                <h3 data-i18n="joint.card.list">Joint List</h3>
                <div class="list-actions">
                  <button class="btn btn-outline" type="button" data-i18n="common.add">Add</button>
                </div>
              </div>
              <label class="form-field list-filter">
                <span data-i18n="common.filter.label">Filter by ID</span>
                <input type="text" data-i18n-placeholder="common.filter.placeholder" placeholder="Filter by ID" />
              </label>
              <ul class="list">
                <li class="list-item is-active">
                  <span>yaw</span>
                  <span class="chip">2 servos</span>
                </li>
                <li class="list-item">
                  <span>pitch</span>
                  <span class="chip">1 servo</span>
                </li>
                <li class="list-item">
                  <span>roll</span>
                  <span class="chip">1 servo</span>
                </li>
              </ul>
            </article>
            <article class="card panel-pane panel-pane--editor" style="--delay: 120ms;">
              <h3 data-i18n="joint.card.definition">Joint Definition</h3>
              <div class="form-grid">
                <label class="form-field">
                  <span data-i18n="joint.form.id">Joint ID</span>
                  <input type="text" data-i18n-placeholder="joint.form.id.placeholder" placeholder="yaw" />
                </label>
                <label class="form-field">
                  <span data-i18n="joint.form.type">Joint type</span>
                  <select>
                    <option value="rotational" data-i18n="joint.form.type.rotational">Rotational</option>
                    <option value="linear" data-i18n="joint.form.type.linear">Linear</option>
                  </select>
                </label>
                <label class="form-field">
                  <span data-i18n="joint.form.servos">Mapped servos</span>
                  <input type="text" data-i18n-placeholder="joint.form.servos.placeholder" placeholder="servo_front_left, servo_front_right" />
                </label>
                <label class="form-field form-field--toggle">
                  <span data-i18n="joint.form.mirror">Mirror pair</span>
                  <input type="checkbox" />
                </label>
                <label class="form-field">
                  <span data-i18n="joint.form.offset">Neutral offset (deg)</span>
                  <input type="number" value="0" />
                </label>
                <label class="form-field">
                  <span data-i18n="joint.form.min">Min (deg)</span>
                  <input type="number" value="-45" />
                </label>
                <label class="form-field">
                  <span data-i18n="joint.form.max">Max (deg)</span>
                  <input type="number" value="45" />
                </label>
                <label class="form-field">
                  <span data-i18n="joint.form.gain">Gain</span>
                  <input type="number" value="1.0" step="0.1" />
                </label>
                <label class="form-field form-field--toggle">
                  <span data-i18n="joint.form.soft">Soft limit</span>
                  <input type="checkbox" checked />
                </label>
                <label class="form-field">
                  <span data-i18n="common.form.displayOrder">Display order</span>
                  <input type="number" value="10" min="0" data-i18n-placeholder="common.form.displayOrder.placeholder"
                    placeholder="10" />
                </label>
                <label class="form-field form-field--full">
                  <span data-i18n="common.form.description">Description</span>
                  <textarea rows="2" data-i18n-placeholder="common.form.description.placeholder"
                    placeholder="Joint for head yaw"></textarea>
                </label>
              </div>
              <div class="card-actions">
                <button class="btn btn-secondary" type="button" data-i18n="common.save">Save</button>
                <button class="btn btn-ghost" type="button" data-i18n="common.deleteSelected">Delete selected</button>
              </div>
            </article>
            <article class="card panel-pane panel-pane--aux" style="--delay: 180ms;">
              <h3 data-i18n="joint.card.group">Group Tools</h3>
              <p class="muted" data-i18n="joint.group.note">Coordinate limits and offsets across grouped joints.</p>
              <div class="card-actions">
                <button class="btn btn-outline" type="button" data-i18n="joint.group.sync">Sync offsets</button>
                <button class="btn btn-ghost" type="button" data-i18n="joint.group.balance">Balance load</button>
              </div>
              <div class="card-actions">
                <button class="btn btn-secondary" type="button" data-i18n="joint.group.test">Test range</button>
              </div>
            </article>
          </div>
        </section>

        <section class="tab-panel" id="panel-joint-group" data-panel="joint-group" role="tabpanel" aria-label="Joint Group">
          <header class="panel-header">
            <h2 data-i18n="jointGroup.title">Joint Group Settings</h2>
            <p class="panel-note" data-i18n="jointGroup.desc">Bundle joints for quick selection and batch edits.</p>
          </header>
          <div class="panel-grid panel-grid--workspace">
            <article class="card panel-pane panel-pane--list" style="--delay: 60ms;">
              <div class="list-header">
                <h3 data-i18n="jointGroup.card.list">Group List</h3>
                <div class="list-actions">
                  <button class="btn btn-outline" type="button" data-i18n="common.add">Add</button>
                </div>
              </div>
              <label class="form-field list-filter">
                <span data-i18n="common.filter.label">Filter by ID</span>
                <input type="text" data-i18n-placeholder="common.filter.placeholder" placeholder="Filter by ID" />
              </label>
              <ul class="list">
                <li class="list-item is-active">
                  <span data-i18n="jointGroup.list.arms">Arms</span>
                  <span class="chip">jg_arms</span>
                </li>
                <li class="list-item">
                  <span data-i18n="jointGroup.list.head">Head</span>
                  <span class="chip">jg_head</span>
                </li>
              </ul>
            </article>
            <article class="card panel-pane panel-pane--editor" style="--delay: 120ms;">
              <h3 data-i18n="jointGroup.card.editor">Group Editor</h3>
              <div class="form-grid">
                <label class="form-field">
                  <span data-i18n="jointGroup.form.id">Group ID</span>
                  <input type="text" data-i18n-placeholder="jointGroup.form.id.placeholder" placeholder="jg_upper" />
                </label>
                <label class="form-field">
                  <span data-i18n="jointGroup.form.joints">Joint IDs</span>
                  <input type="text" data-i18n-placeholder="jointGroup.form.joints.placeholder" placeholder="yaw, pitch, roll" />
                </label>
                <label class="form-field">
                  <span data-i18n="common.form.displayOrder">Display order</span>
                  <input type="number" value="10" min="0" data-i18n-placeholder="common.form.displayOrder.placeholder"
                    placeholder="10" />
                </label>
                <label class="form-field form-field--full">
                  <span data-i18n="common.form.description">Description</span>
                  <textarea rows="2" data-i18n-placeholder="common.form.description.placeholder"
                    placeholder="Upper body group"></textarea>
                </label>
              </div>
              <div class="card-actions">
                <button class="btn btn-secondary" type="button" data-i18n="common.save">Save</button>
                <button class="btn btn-ghost" type="button" data-i18n="common.deleteSelected">Delete selected</button>
              </div>
            </article>
            <article class="card panel-pane panel-pane--aux" style="--delay: 180ms;">
              <h3 data-i18n="jointGroup.card.actions">Quick Actions</h3>
              <p class="muted" data-i18n="jointGroup.actions.note">Groups are UI-only and expanded before export.</p>
              <div class="card-actions">
                <button class="btn btn-secondary" type="button" data-i18n="jointGroup.actions.select">Select group</button>
                <button class="btn btn-ghost" type="button" data-i18n="jointGroup.actions.expand">Expand joints</button>
              </div>
            </article>
          </div>
        </section>

        <section class="tab-panel" id="panel-pose" data-panel="pose" role="tabpanel" aria-label="Pose">
          <header class="panel-header">
            <h2 data-i18n="pose.title">Pose Settings</h2>
            <p class="panel-note" data-i18n="pose.desc">Capture and edit joint angles as reusable poses.</p>
          </header>
          <div class="panel-grid panel-grid--workspace">
            <article class="card panel-pane panel-pane--list" style="--delay: 60ms;">
              <div class="list-header">
                <h3 data-i18n="pose.card.list">Pose List</h3>
                <div class="list-actions">
                  <button class="btn btn-outline" type="button" data-i18n="common.add">Add</button>
                </div>
              </div>
              <label class="form-field list-filter">
                <span data-i18n="common.filter.label">Filter by ID</span>
                <input type="text" data-i18n-placeholder="common.filter.placeholder" placeholder="Filter by ID" />
              </label>
              <ul class="list">
                <li class="list-item is-active">
                  <span data-i18n="pose.list.home">Home</span>
                  <span class="chip">p_home</span>
                </li>
                <li class="list-item">
                  <span data-i18n="pose.list.wave">Wave</span>
                  <span class="chip">p_wave</span>
                </li>
                <li class="list-item">
                  <span data-i18n="pose.list.ready">Ready</span>
                  <span class="chip">p_ready</span>
                </li>
              </ul>
            </article>
            <article class="card panel-pane panel-pane--editor" style="--delay: 120ms;">
              <h3 data-i18n="pose.card.editor">Pose Editor</h3>
              <div class="form-grid">
                <label class="form-field">
                  <span data-i18n="pose.editor.name">Pose name</span>
                  <input type="text" data-i18n-placeholder="pose.editor.name.placeholder" placeholder="pose_wave" />
                </label>
                <label class="form-field">
                  <span data-i18n="pose.editor.hold">Hold (ms)</span>
                  <input type="number" value="200" />
                </label>
                <label class="form-field">
                  <span data-i18n="common.form.displayOrder">Display order</span>
                  <input type="number" value="10" min="0" data-i18n-placeholder="common.form.displayOrder.placeholder"
                    placeholder="10" />
                </label>
                <label class="form-field form-field--full">
                  <span data-i18n="common.form.description">Description</span>
                  <textarea rows="2" data-i18n-placeholder="common.form.description.placeholder"
                    placeholder="Neutral pose for start"></textarea>
                </label>
              </div>
              <table class="mini-table">
                <thead>
                  <tr>
                    <th data-i18n="pose.editor.axis">Axis</th>
                    <th data-i18n="pose.editor.value">Target (deg)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>yaw</td>
                    <td><input type="number" value="20" /></td>
                  </tr>
                  <tr>
                    <td>pitch</td>
                    <td><input type="number" value="-10" /></td>
                  </tr>
                  <tr>
                    <td>roll</td>
                    <td><input type="number" value="5" /></td>
                  </tr>
                </tbody>
              </table>
              <div class="card-actions">
                <button class="btn btn-secondary" type="button" data-i18n="common.save">Save</button>
                <button class="btn btn-ghost" type="button" data-i18n="common.deleteSelected">Delete selected</button>
              </div>
            </article>
            <article class="card panel-pane panel-pane--aux" style="--delay: 180ms;">
              <h3 data-i18n="pose.card.capture">Capture & Preview</h3>
              <p class="muted" data-i18n="pose.capture.note">Works offline; device sync is optional.</p>
              <div class="card-actions">
                <button class="btn btn-outline" type="button" data-i18n="pose.capture.snapshot">Snapshot from device</button>
                <button class="btn btn-secondary" type="button" data-i18n="pose.capture.preview">Preview pose</button>
              </div>
            </article>
          </div>
        </section>

        <section class="tab-panel" id="panel-sequence" data-panel="sequence" role="tabpanel" aria-label="Sequence">
          <header class="panel-header">
            <h2 data-i18n="sequence.title">Sequence Settings</h2>
            <p class="panel-note" data-i18n="sequence.desc">Compose steps, triggers, and reusable sequences for header export.</p>
          </header>
          <div class="panel-grid panel-grid--workspace">
            <article class="card panel-pane panel-pane--list" style="--delay: 60ms;">
              <div class="list-header">
                <h3 data-i18n="sequence.card.list">Sequence List</h3>
                <div class="list-actions">
                  <button class="btn btn-outline" type="button" data-i18n="common.add">Add</button>
                </div>
              </div>
              <label class="form-field list-filter">
                <span data-i18n="common.filter.label">Filter by ID</span>
                <input type="text" data-i18n-placeholder="common.filter.placeholder" placeholder="Filter by ID" />
              </label>
              <ul class="list">
                <li class="list-item is-active">
                  <span>seq_demo</span>
                  <span class="chip">3 steps</span>
                </li>
                <li class="list-item">
                  <span>seq_intro</span>
                  <span class="chip">2 steps</span>
                </li>
              </ul>
            </article>
            <article class="card panel-pane panel-pane--editor" style="--delay: 120ms;">
              <h3 data-i18n="sequence.card.steps">Sequence Steps</h3>
              <ol class="step-list">
                <li>
                  <span class="step-title" data-i18n="sequence.steps.step1">Step 1: p_home</span>
                  <span class="chip">500ms · e_smooth</span>
                </li>
                <li>
                  <span class="step-title" data-i18n="sequence.steps.step2">Step 2: p_wave</span>
                  <span class="chip">800ms · e_linear</span>
                </li>
                <li>
                  <span class="step-title" data-i18n="sequence.steps.step3">Step 3: call seq_intro</span>
                  <span class="chip" data-i18n="sequence.steps.inline">Inline on header export</span>
                </li>
              </ol>
              <button class="btn btn-outline" type="button" data-i18n="sequence.steps.add">Add step</button>
              <div class="form-grid">
                <label class="form-field form-field--toggle">
                  <span data-i18n="sequence.form.loop">Loop playback</span>
                  <input type="checkbox" checked />
                </label>
                <label class="form-field">
                  <span data-i18n="sequence.form.trigger">Trigger</span>
                  <select>
                    <option value="start" data-i18n="sequence.form.trigger.option.start">On sequence start</option>
                    <option value="end" data-i18n="sequence.form.trigger.option.end">On sequence end</option>
                  </select>
                </label>
                <label class="form-field">
                  <span data-i18n="sequence.form.eventId">Event ID</span>
                  <input type="number" value="100" />
                </label>
                <label class="form-field">
                  <span data-i18n="common.form.displayOrder">Display order</span>
                  <input type="number" value="10" min="0" data-i18n-placeholder="common.form.displayOrder.placeholder"
                    placeholder="10" />
                </label>
                <label class="form-field form-field--full">
                  <span data-i18n="common.form.description">Description</span>
                  <textarea rows="2" data-i18n-placeholder="common.form.description.placeholder"
                    placeholder="Sequence used in demo"></textarea>
                </label>
              </div>
              <div class="card-actions">
                <button class="btn btn-secondary" type="button" data-i18n="common.save">Save</button>
                <button class="btn btn-ghost" type="button" data-i18n="common.deleteSelected">Delete selected</button>
              </div>
            </article>
            <article class="card panel-pane panel-pane--aux" style="--delay: 180ms;">
              <h3 data-i18n="sequence.card.axis">Axis Easing</h3>
              <p class="muted" data-i18n="sequence.axis.note">Override per axis when needed.</p>
              <div class="mini-list">
                <div class="mini-row">
                  <span class="mini-k">yaw</span>
                  <span class="mini-v">e_linear</span>
                </div>
                <div class="mini-row">
                  <span class="mini-k">pitch</span>
                  <span class="mini-v">e_smooth</span>
                </div>
                <div class="mini-row">
                  <span class="mini-k">roll</span>
                  <span class="mini-v">e_scurve_strong</span>
                </div>
              </div>
              <button class="btn btn-ghost" type="button" data-i18n="sequence.axis.edit">Edit overrides</button>
            </article>
          </div>
        </section>

        <section class="tab-panel" id="panel-easing" data-panel="easing" role="tabpanel" aria-label="Easing">
          <header class="panel-header">
            <h2 data-i18n="easing.title">Easing Settings</h2>
            <p class="panel-note" data-i18n="easing.desc">Manage easing presets and custom curves.</p>
          </header>
          <div class="panel-grid panel-grid--workspace">
            <article class="card panel-pane panel-pane--list" style="--delay: 60ms;">
              <div class="list-header">
                <h3 data-i18n="easing.card.list">Easing List</h3>
                <div class="list-actions">
                  <button class="btn btn-outline" type="button" data-i18n="common.add">Add</button>
                </div>
              </div>
              <label class="form-field list-filter">
                <span data-i18n="common.filter.label">Filter by ID</span>
                <input type="text" data-i18n-placeholder="common.filter.placeholder" placeholder="Filter by ID" />
              </label>
              <ul class="list">
                <li class="list-item is-active">
                  <span>e_smooth</span>
                  <span class="chip" data-i18n="easing.list.preset">Preset</span>
                </li>
                <li class="list-item">
                  <span>e_linear</span>
                  <span class="chip" data-i18n="easing.list.preset">Preset</span>
                </li>
                <li class="list-item">
                  <span>e_scurve_strong</span>
                  <span class="chip" data-i18n="easing.list.custom">Custom</span>
                </li>
              </ul>
            </article>
            <article class="card panel-pane panel-pane--editor" style="--delay: 120ms;">
              <h3 data-i18n="easing.card.editor">Curve Editor</h3>
              <div class="form-grid">
                <label class="form-field">
                  <span data-i18n="easing.form.id">Easing ID</span>
                  <input type="text" value="e_smooth" />
                </label>
                <label class="form-field">
                  <span data-i18n="easing.form.preset">Preset</span>
                  <select>
                    <option value="linear" data-i18n="easing.form.preset.linear">Linear</option>
                    <option value="easeInOut" data-i18n="easing.form.preset.smooth">Smooth</option>
                    <option value="sCurve" data-i18n="easing.form.preset.curve">S-curve</option>
                  </select>
                </label>
                <label class="form-field">
                  <span data-i18n="easing.form.param">Strength</span>
                  <input type="range" min="0" max="1" step="0.1" value="0.6" />
                </label>
                <label class="form-field">
                  <span data-i18n="common.form.displayOrder">Display order</span>
                  <input type="number" value="10" min="0" data-i18n-placeholder="common.form.displayOrder.placeholder"
                    placeholder="10" />
                </label>
                <label class="form-field form-field--full">
                  <span data-i18n="common.form.description">Description</span>
                  <textarea rows="2" data-i18n-placeholder="common.form.description.placeholder"
                    placeholder="Smooth easing for demo"></textarea>
                </label>
              </div>
              <div class="card-actions">
                <button class="btn btn-secondary" type="button" data-i18n="common.save">Save</button>
                <button class="btn btn-ghost" type="button" data-i18n="common.deleteSelected">Delete selected</button>
              </div>
            </article>
            <article class="card panel-pane panel-pane--aux" style="--delay: 180ms;">
              <h3 data-i18n="easing.card.preview">Preview</h3>
              <p class="muted" data-i18n="easing.preview.note">Use to compare timing curves.</p>
              <div class="card-actions">
                <button class="btn btn-secondary" type="button" data-i18n="easing.preview.apply">Apply to selection</button>
                <button class="btn btn-ghost" type="button" data-i18n="easing.preview.reset">Reset</button>
              </div>
            </article>
          </div>
        </section>

        <section class="tab-panel" id="panel-event" data-panel="event" role="tabpanel" aria-label="Event">
          <header class="panel-header">
            <h2 data-i18n="event.title">Event Settings</h2>
            <p class="panel-note" data-i18n="event.desc">Define event IDs and map triggers to cues.</p>
          </header>
          <div class="panel-grid panel-grid--workspace">
            <article class="card panel-pane panel-pane--list" style="--delay: 60ms;">
              <div class="list-header">
                <h3 data-i18n="event.card.list">Event List</h3>
                <div class="list-actions">
                  <button class="btn btn-outline" type="button" data-i18n="common.add">Add</button>
                </div>
              </div>
              <label class="form-field list-filter">
                <span data-i18n="common.filter.label">Filter by ID</span>
                <input type="text" data-i18n-placeholder="common.filter.placeholder" placeholder="Filter by ID" />
              </label>
              <ul class="list">
                <li class="list-item is-active">
                  <span data-i18n="event.list.start">Sequence start</span>
                  <span class="chip">100</span>
                </li>
                <li class="list-item">
                  <span data-i18n="event.list.pose">Pose complete</span>
                  <span class="chip">210</span>
                </li>
              </ul>
            </article>
            <article class="card panel-pane panel-pane--editor" style="--delay: 120ms;">
              <h3 data-i18n="event.card.mapping">Trigger Mapping</h3>
              <div class="form-grid">
                <label class="form-field">
                  <span data-i18n="event.form.trigger">Trigger</span>
                  <select>
                    <option value="sequence_start" data-i18n="event.form.trigger.start">Sequence start</option>
                    <option value="sequence_end" data-i18n="event.form.trigger.end">Sequence end</option>
                    <option value="pose_start" data-i18n="event.form.trigger.poseStart">Pose start</option>
                    <option value="pose_end" data-i18n="event.form.trigger.poseEnd">Pose end</option>
                  </select>
                </label>
                <label class="form-field">
                  <span data-i18n="event.form.eventId">Event ID</span>
                  <input type="number" value="100" />
                </label>
                <label class="form-field">
                  <span data-i18n="common.form.displayOrder">Display order</span>
                  <input type="number" value="10" min="0" data-i18n-placeholder="common.form.displayOrder.placeholder"
                    placeholder="10" />
                </label>
                <label class="form-field form-field--full">
                  <span data-i18n="common.form.description">Description</span>
                  <textarea rows="2" data-i18n-placeholder="common.form.description.placeholder"
                    placeholder="Event for start cue"></textarea>
                </label>
              </div>
              <div class="card-actions">
                <button class="btn btn-secondary" type="button" data-i18n="common.save">Save</button>
                <button class="btn btn-ghost" type="button" data-i18n="common.deleteSelected">Delete selected</button>
              </div>
            </article>
            <article class="card panel-pane panel-pane--aux" style="--delay: 180ms;">
              <h3 data-i18n="event.card.preview">Event Queue</h3>
              <p class="muted" data-i18n="event.preview.note">Events are queued and handled in the sketch.</p>
              <div class="card-actions">
                <button class="btn btn-secondary" type="button" data-i18n="event.preview.simulate">Simulate</button>
                <button class="btn btn-ghost" type="button" data-i18n="event.preview.clear">Clear</button>
              </div>
            </article>
          </div>
        </section>
      </section>
    </main>
  </div>

  <div class="modal" data-modal="firmware-flash" aria-hidden="true">
    <div class="modal__backdrop" data-modal-close></div>
    <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="firmware-flash-title">
      <header class="modal__header">
        <h2 id="firmware-flash-title" data-i18n="firmware.modal.title">Flash Preview Firmware</h2>
        <p class="modal__detail" data-i18n="firmware.modal.description">
          Select a preview firmware package and transfer it over WebSerial.
        </p>
      </header>
      <div class="modal__body">
        <label class="form-field">
          <span data-i18n="firmware.modal.firmwareLabel">Firmware package</span>
          <select id="firmware-select" data-i18n-aria="firmware.modal.firmwareAria"></select>
        </label>
        <div class="firmware-summary">
          <h3 data-i18n="firmware.modal.summary.title">Summary</h3>
          <p data-firmware-summary-text></p>
        </div>
        <label class="form-field">
          <span data-i18n="firmware.modal.baudrateLabel">Transfer speed</span>
          <select id="firmware-baudrate" data-i18n-aria="firmware.modal.baudrateAria"></select>
          <span class="field-hint" data-i18n="firmware.modal.baudrateHint">
            Choose a speed supported by your board.
          </span>
        </label>
        <label class="checkbox-field">
          <input type="checkbox" id="firmware-erase-before" />
          <span data-i18n="firmware.modal.eraseBefore">Erase flash before transfer</span>
        </label>
        <span class="field-hint" data-i18n="firmware.modal.eraseBeforeHint">
          Runs erase_flash before writing.
        </span>
        <div class="firmware-details">
          <h3 data-i18n="firmware.modal.details.title">Flash options</h3>
          <dl class="firmware-detail-list">
            <div>
              <dt data-i18n="firmware.modal.details.chip">Target</dt>
              <dd data-firmware-detail="chip">--</dd>
            </div>
            <div>
              <dt data-i18n="firmware.modal.details.flashMode">Flash mode</dt>
              <dd data-firmware-detail="flash-mode">--</dd>
            </div>
            <div>
              <dt data-i18n="firmware.modal.details.flashFreq">Flash frequency</dt>
              <dd data-firmware-detail="flash-freq">--</dd>
            </div>
            <div>
              <dt data-i18n="firmware.modal.details.flashSize">Flash size</dt>
              <dd data-firmware-detail="flash-size">--</dd>
            </div>
          </dl>
          <div class="firmware-segments">
            <h4 data-i18n="firmware.modal.segments.title">Write segments</h4>
            <ul data-firmware-segments></ul>
          </div>
        </div>
        <div class="firmware-status">
          <div class="flash-progress" data-flash-progress>
            <progress value="0" max="100"></progress>
            <span data-flash-progress-label>0%</span>
          </div>
          <pre class="flash-log" data-flash-log aria-live="polite"></pre>
        </div>
      </div>
      <div class="modal__footer">
        <button class="btn btn-ghost" type="button" data-modal-close data-i18n="firmware.modal.cancel">Close</button>
        <button class="btn btn-outline" type="button" id="firmware-erase-button" data-i18n="firmware.modal.erase">
          Erase
        </button>
        <button class="btn btn-primary" type="button" id="firmware-start-button" data-i18n="firmware.modal.start">
          Start transfer
        </button>
      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
